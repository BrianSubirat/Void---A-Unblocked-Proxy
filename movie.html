<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamFlix</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 1px solid #1a1a1a;
            z-index: 1000;
            padding: 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            height: 60px;
        }

        .nav-logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #007bff;
        }

        @media (max-width: 768px) {
            .nav-logo h1 {
                display: none;
            }
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            padding: 0.5rem 0;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .nav-link:hover {
            color: #007bff;
        }

        .nav-dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-trigger {
            cursor: pointer;
        }

        .dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .dropdown-content.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-content a {
            display: block;
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
            border-bottom: 1px solid #333;
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background-color: #333;
            color: #007bff;
        }

        .account-dropdown {
            right: 0;
            left: auto;
            min-width: 200px;
        }

        .account-dropdown a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-btn, .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .search-btn:hover, .profile-icon:hover {
            background: #333;
            border-color: #007bff;
        }

        .search-overlay {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 1px solid #1a1a1a;
            padding: 1rem 2rem;
            transform: translateY(-100%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .search-overlay.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .search-container {
            display: flex;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .search-container input {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-container input:focus {
            border-color: #007bff;
        }

        .search-close {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.5rem;
        }

        /* Search Suggestions */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-top: 0.5rem;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #333;
            transition: background-color 0.3s ease;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background-color: #333;
        }

        .suggestion-item img {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .suggestion-info {
            flex: 1;
            min-width: 0;
        }

        .suggestion-title {
            font-size: 0.95rem;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .suggestion-meta {
            font-size: 0.8rem;
            color: #999;
        }

        /* Main Content */
        .main-content {
            margin-top: 60px;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            height: 60vh;
            min-height: 400px;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
        }

        .hero-carousel {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            padding: 0 4rem;
            cursor: pointer;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-slide img {
            width: 300px;
            height: 450px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .hero-content {
            margin-left: 3rem;
            max-width: 500px;
        }

        .hero-content h2 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .hero-content p {
            font-size: 1.2rem;
            opacity: 0.8;
            line-height: 1.6;
            color: #cccccc;
        }

        /* Content Sections */
        .content-section {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .content-section h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #ffffff;
        }

        .movie-row {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            padding-bottom: 1rem;
            scroll-behavior: smooth;
        }

        .movie-row::-webkit-scrollbar {
            height: 8px;
        }

        .movie-row::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }

        .movie-row::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        .movie-card {
            flex: 0 0 220px;
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid transparent;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .movie-card:hover {
            transform: scale(1.05);
            border-color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            z-index: 10;
        }

        .movie-poster {
            position: relative;
            width: 100%;
            height: 320px;
            overflow: hidden;
        }

        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .movie-card:hover .movie-poster img {
            transform: scale(1.1);
        }

        .movie-info {
            padding: 1rem;
            background: linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%);
        }

        .movie-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #ffffff;
            line-height: 1.2;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .movie-meta {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stars {
            display: flex;
            gap: 1px;
        }

        .star {
            color: #ffd700;
            font-size: 0.8rem;
        }

        .rating-text {
            font-size: 0.85rem;
            color: #cccccc;
            font-weight: 500;
        }

        .views {
            font-size: 0.8rem;
            color: #999999;
        }

        /* Movie card hover overlay */
        .movie-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                180deg,
                transparent 0%,
                transparent 60%,
                rgba(0, 0, 0, 0.8) 100%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .movie-card:hover::after {
            opacity: 1;
        }

        /* Play button overlay */
        .movie-card:hover .movie-poster::before {
            content: '\f04b';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 2rem;
            z-index: 5;
            opacity: 0;
            animation: fadeInPlay 0.3s ease forwards;
        }

        @keyframes fadeInPlay {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .movie-detail {
            background: linear-gradient(145deg, #1a1a1a 0%, #2d2d2d 100%);
            border-radius: 16px;
            max-width: 1000px;
            width: 90%;
            max-height: 90vh;
            overflow: hidden;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
            border: 1px solid #333;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .modal-overlay.active .movie-detail {
            transform: scale(1);
        }

        .close-btn {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #333;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .close-btn:hover {
            background: #333;
            border-color: #007bff;
            transform: scale(1.1);
        }

        .movie-detail-content {
            display: flex;
            flex-direction: row;
            min-height: 500px;
        }

        .movie-detail .movie-poster {
            position: relative;
            width: 400px;
            height: 100%;
            min-height: 500px;
            flex-shrink: 0;
        }

        .movie-detail .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .play-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                180deg,
                transparent 0%,
                transparent 60%,
                rgba(0, 0, 0, 0.8) 100%
            );
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .play-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #007bff;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(0, 123, 255, 0.3);
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 32px rgba(0, 123, 255, 0.4);
            background: #0056b3;
        }

        .movie-detail .movie-info {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .movie-info h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #ffffff;
            line-height: 1.2;
        }

        .movie-meta {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .year {
            background: linear-gradient(135deg, #007bff, #0056b3);
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.4rem 1rem;
            border-radius: 20px;
        }

        .description {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #cccccc;
            margin-bottom: 2rem;
            text-align: justify;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: auto;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 1.5rem;
            border: 2px solid #333;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        .action-btn:hover {
            border-color: #007bff;
            background: rgba(0, 123, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
        }

        .action-btn.active {
            background: linear-gradient(135deg, #007bff, #0056b3);
            border-color: #007bff;
            color: white;
        }

        /* Video Player */
        .video-player-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000000;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .video-player-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .back-btn {
            position: absolute;
            top: 2rem;
            left: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #333;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #333;
            border-color: #007bff;
        }

        .youtube-player {
            width: 100%;
            height: 100%;
        }

        .youtube-player iframe {
            width: 100%;
            height: 100%;
        }

        .custom-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            padding: 2rem 2rem 1rem;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .video-container:hover .custom-controls,
        .custom-controls.visible {
            opacity: 1;
            visibility: visible;
        }

        .control-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #007bff;
        }

        .progress-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            position: relative;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            background: #007bff;
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .progress-handle {
            position: absolute;
            top: 50%;
            left: 0%;
            width: 12px;
            height: 12px;
            background: #007bff;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: grab;
        }

        .progress-handle:active {
            cursor: grabbing;
        }

        .time-display {
            font-size: 0.9rem;
            white-space: nowrap;
            color: #cccccc;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .volume-slider {
            width: 80px;
        }

        .volume-slider input {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            outline: none;
            appearance: none;
        }

        .volume-slider input::-webkit-slider-thumb {
            appearance: none;
            width: 12px;
            height: 12px;
            background: #007bff;
            border-radius: 50%;
            cursor: pointer;
        }

        /* Progress indicator for Continue Watching */
        .progress-indicator {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: #007bff;
            border-radius: 0 0 12px 12px;
            transition: width 0.3s ease;
        }

        /* Embed Player */
        .embed-player {
            position: relative;
            width: 100%;
            height: 100%;
            background: #000;
        }

        .embed-player iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Embed Controls */
        .embed-controls {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid #333;
        }

        .embed-source-group {
            margin-bottom: 1rem;
        }

        .embed-source-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: #cccccc;
        }

        .embed-source-group select {
            width: 100%;
            padding: 0.5rem;
            background: #333;
            border: 1px solid #555;
            border-radius: 6px;
            color: white;
            font-size: 0.9rem;
        }

        .embed-source-group select:focus {
            outline: none;
            border-color: #007bff;
        }

        .season-episode-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .season-episode-controls input {
            flex: 1;
            padding: 0.5rem;
            background: #333;
            border: 1px solid #555;
            border-radius: 6px;
            color: white;
            font-size: 0.9rem;
        }

        .season-episode-controls input:focus {
            outline: none;
            border-color: #007bff;
        }

        /* Page Overlay Styles */
        .page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a0a0a;
            z-index: 2500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .page-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
        }

        .page-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding-top: 60px; /* Account for fixed navbar */
        }

        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0;
        }

        .page-content {
            width: 100%;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #cccccc;
        }

        .empty-state i {
            font-size: 4rem;
            color: #666;
            margin-bottom: 1rem;
            display: block;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ffffff;
        }

        .empty-state p {
            font-size: 1rem;
            opacity: 0.8;
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Grid Movie Card Styles */
        .movies-grid .movie-card {
            flex: none;
            width: 100%;
        }

        .movies-grid .movie-card .movie-info {
            padding: 1rem;
        }

        .movies-grid .movie-card .movie-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Mobile Responsive for Pages */
        @media (max-width: 768px) {
            .page-container {
                padding: 1rem;
            }
            
            .page-header {
                padding-top: 60px;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 1rem;
            }
            
            .empty-state {
                padding: 2rem 1rem;
            }
            
            .empty-state i {
                font-size: 3rem;
            }
            
            .empty-state h3 {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                height: 56px;
            }

            .nav-menu {
                gap: 0.75rem;
            }

            .nav-link {
                font-size: 0.85rem;
                padding: 0.75rem 0;
            }

            .nav-actions {
                gap: 0.75rem;
            }

            .search-btn, .profile-icon {
                width: 36px;
                height: 36px;
                font-size: 0.9rem;
            }

            .search-overlay {
                padding: 0.75rem 1rem;
            }

            .hero-slide {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem 1rem;
                justify-content: center;
            }

            .hero-slide img {
                width: 180px;
                height: 270px;
                margin-bottom: 1.5rem;
            }

            .hero-content {
                margin-left: 0;
                max-width: 100%;
            }

            .hero-content h2 {
                font-size: 2rem;
                margin-bottom: 0.75rem;
            }

            .hero-content p {
                font-size: 1rem;
                line-height: 1.5;
                margin-bottom: 1rem;
            }

            .content-section {
                padding: 1.5rem 1rem;
            }

            .content-section h2 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            .movie-card {
                flex: 0 0 140px;
                min-height: 240px;
            }

            .movie-poster {
                height: 200px;
            }

            .movie-info {
                padding: 0.75rem;
            }

            .movie-title {
                font-size: 0.9rem;
                line-height: 1.3;
                margin-bottom: 0.5rem;
            }

            .movie-meta {
                gap: 0.25rem;
            }

            .rating {
                gap: 0.25rem;
            }

            .stars {
                gap: 1px;
            }

            .star {
                font-size: 0.7rem;
            }

            .rating-text, .views {
                font-size: 0.75rem;
            }

            .movie-detail-content {
                flex-direction: column;
                min-height: auto;
            }

            .movie-detail .movie-poster {
                width: 100%;
                height: 300px;
                min-height: auto;
            }

            .movie-info {
                padding: 1.5rem;
            }

            .movie-info h1 {
                font-size: 1.8rem;
                line-height: 1.2;
                margin-bottom: 0.75rem;
            }

            .movie-meta {
                flex-wrap: wrap;
                gap: 0.75rem;
                margin-bottom: 1rem;
            }

            .description {
                font-size: 1rem;
                line-height: 1.6;
                margin-bottom: 1.5rem;
            }

            .action-buttons {
                flex-direction: column;
                gap: 0.75rem;
            }

            .action-btn {
                justify-content: center;
                padding: 0.875rem 1.25rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .embed-controls {
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .embed-source-group select {
                padding: 0.75rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .season-episode-controls {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .season-episode-controls input {
                padding: 0.75rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .back-btn {
                top: 1rem;
                left: 1rem;
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .close-btn {
                top: 1rem;
                right: 1rem;
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .play-btn {
                width: 70px;
                height: 70px;
                font-size: 1.75rem;
            }

            .custom-controls {
                padding: 1rem;
            }

            .control-bar {
                flex-wrap: wrap;
                gap: 0.75rem;
            }

            .control-btn {
                width: 44px;
                height: 44px;
                font-size: 1rem;
            }

            .volume-container {
                order: 1;
                width: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }

            .volume-slider {
                flex: 1;
                max-width: 150px;
            }

            .search-suggestions {
                max-height: 250px;
                margin-top: 0.25rem;
            }
            
            .suggestion-item {
                padding: 0.75rem;
                min-height: 64px;
            }
            
            .suggestion-item img {
                width: 40px;
                height: 60px;
                margin-right: 0.75rem;
            }

            .suggestion-title {
                font-size: 0.9rem;
                margin-bottom: 0.125rem;
            }

            .suggestion-meta {
                font-size: 0.75rem;
            }

            .dropdown-content {
                position: fixed;
                top: 56px;
                left: 0.5rem;
                right: 0.5rem;
                width: auto;
                min-width: auto;
                max-height: 300px;
                overflow-y: auto;
            }

            .dropdown-content a {
                padding: 1rem;
                font-size: 0.9rem;
                min-height: 48px;
                display: flex;
                align-items: center;
            }
            
            .main-content {
                margin-top: 56px;
            }
            
            .hero-section {
                height: 50vh;
                min-height: 320px;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                height: 52px;
            }

            .nav-menu {
                gap: 0.5rem;
            }

            .nav-link {
                font-size: 0.8rem;
                padding: 0.5rem 0;
            }

            .search-btn, .profile-icon {
                width: 32px;
                height: 32px;
                font-size: 0.8rem;
            }

            .movie-card {
                flex: 0 0 120px;
                min-height: 200px;
            }

            .movie-poster {
                height: 160px;
            }

            .movie-info {
                padding: 0.5rem;
            }

            .movie-title {
                font-size: 0.85rem;
                line-height: 1.2;
                margin-bottom: 0.25rem;
            }

            .hero-section {
                height: 45vh;
                min-height: 280px;
            }

            .hero-slide {
                padding: 1rem 0.75rem;
            }

            .hero-slide img {
                width: 150px;
                height: 225px;
                margin-bottom: 1rem;
            }

            .hero-content h2 {
                font-size: 1.6rem;
                margin-bottom: 0.5rem;
            }

            .hero-content p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            .content-section {
                padding: 1rem 0.75rem;
            }

            .content-section h2 {
                font-size: 1.3rem;
                margin-bottom: 0.75rem;
            }

            .movie-detail {
                width: 95%;
                max-height: 95vh;
            }

            .movie-info h1 {
                font-size: 1.5rem;
            }

            .description {
                font-size: 0.9rem;
                line-height: 1.5;
            }

            .back-btn, .close-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .play-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .dropdown-content {
                top: 52px;
                left: 0.25rem;
                right: 0.25rem;
            }

            .dropdown-content a {
                padding: 0.875rem;
                font-size: 0.85rem;
            }
        }

        /* Touch and Accessibility Improvements */
        @media (max-width: 768px) {
            /* Improve touch targets */
            .movie-card {
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }

            .movie-card:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }

            /* Better scrolling */
            .movie-row {
                scroll-snap-type: x mandatory;
                -webkit-overflow-scrolling: touch;
            }

            .movie-card {
                scroll-snap-align: start;
            }

            /* Improve button accessibility */
            button, .action-btn, .control-btn {
                min-height: 44px;
                min-width: 44px;
            }

            /* Better form inputs */
            input, select {
                min-height: 44px;
                font-size: 16px; /* Prevents zoom on iOS */
            }

            /* Safe area for notched devices */
            .navbar {
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }

            .nav-container {
                padding-left: max(1rem, env(safe-area-inset-left));
                padding-right: max(1rem, env(safe-area-inset-right));
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h1>Void Movies</h1>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link">Movies</a>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger" id="genresDropdown">
                        Genres <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-content" id="genresDropdownContent">
                        <a href="#" data-genre="action">Action</a>
                        <a href="#" data-genre="comedy">Comedy</a>
                        <a href="#" data-genre="drama">Drama</a>
                        <a href="#" data-genre="horror">Horror</a>
                        <a href="#" data-genre="romance">Romance</a>
                        <a href="#" data-genre="thriller">Thriller</a>
                        <a href="#" data-genre="sci-fi">Sci-Fi</a>
                        <a href="#" data-genre="documentary">Documentary</a>
                    </div>
                </div>
                <a href="#" class="nav-link">Live Shows</a>
            </div>
            <div class="nav-actions">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
                <div class="nav-dropdown">
                    <div class="profile-icon dropdown-trigger" id="accountDropdown">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="dropdown-content account-dropdown" id="accountDropdownContent">
                        <a href="#"><i class="fas fa-user-cog"></i> Account Settings</a>
                        <a href="#" id="myFavoritesLink"><i class="fas fa-heart"></i> My Favorites</a>
                        <a href="#" id="watchLaterLink"><i class="fas fa-bookmark"></i> Watch Later</a>
                        <a href="#" id="watchHistoryLink"><i class="fas fa-history"></i> Watch History</a>
                        <a href="#"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="search-overlay" id="searchOverlay">
            <div class="search-container">
                <input type="text" placeholder="Search movies and TV shows..." id="searchInput">
                <button class="search-close" id="searchClose">
                    <i class="fas fa-times"></i>
                </button>
                <div id="suggestions" class="search-suggestions"></div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-carousel" id="heroCarousel">
                <!-- Hero slides will be populated by JavaScript -->
            </div>
        </section>

        <!-- Continue Watching Section -->
        <section class="content-section" id="continueWatchingSection" style="display: none;">
            <h2>Continue Watching</h2>
            <div class="movie-row" id="continueWatchingRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <!-- Movie Sections -->
        <section class="content-section">
            <h2>Trending Now</h2>
            <div class="movie-row" id="trendingRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <section class="content-section">
            <h2>Top Rated</h2>
            <div class="movie-row" id="topRatedRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <section class="content-section">
            <h2>Recently Added</h2>
            <div class="movie-row" id="recentlyAddedRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <section class="content-section">
            <h2>Watch Later</h2>
            <div class="movie-row" id="watchLaterRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- My Favorites Page -->
    <div class="page-overlay" id="myFavoritesPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="favoritesBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>My Favorites</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="favoritesGrid">
                    <!-- Favorite movies will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Watch Later Page -->
    <div class="page-overlay" id="watchLaterPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="watchLaterBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>Watch Later</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="watchLaterGrid">
                    <!-- Watch later movies will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Watch History Page -->
    <div class="page-overlay" id="watchHistoryPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="historyBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>Watch History</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="historyGrid">
                    <!-- Watch history will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Movie Detail Modal -->
    <div class="modal-overlay" id="movieModal">
        <div class="movie-detail">
            <button class="close-btn" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
            <div class="movie-detail-content">
                <div class="movie-poster">
                    <img id="modalPoster" src="" alt="">
                    <div class="play-overlay">
                        <button class="play-btn" id="playBtn">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                </div>
                <div class="movie-info">
                    <h1 id="modalTitle"></h1>
                    <div class="movie-meta">
                        <span class="year" id="modalYear"></span>
                        <div class="rating">
                            <div class="stars" id="modalStars"></div>
                            <span class="rating-text" id="modalRating"></span>
                        </div>
                        <span class="views" id="modalViews"></span>
                    </div>
                    <p class="description" id="modalDescription"></p>
                    
                    <!-- TV Show specific controls -->
                    <div id="tvShowControls" style="display: none;">
                        <div class="season-episode-controls">
                            <input type="number" id="seasonNumber" placeholder="Season" min="1">
                            <input type="number" id="episodeNumber" placeholder="Episode" min="1">
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="action-btn like-btn" id="likeBtn">
                            <i class="far fa-thumbs-up"></i>
                            <span>Like</span>
                        </button>
                        <button class="action-btn dislike-btn" id="dislikeBtn">
                            <i class="far fa-thumbs-down"></i>
                            <span>Dislike</span>
                        </button>
                        <button class="action-btn watch-later-btn" id="watchLaterBtn">
                            <i class="far fa-bookmark"></i>
                            <span>Watch Later</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Player -->
    <div class="video-player-overlay" id="videoPlayer">
        <div class="video-container">
            <button class="back-btn" id="backBtn">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="embed-player" id="embedPlayer">
                <!-- Embed iframe will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Adblocker Warning -->
    <div id="adblockWarning" class="adblock-warning" style="display: none;">
        <strong>⛔ Use an Adblocker! ⛔</strong>
        <p>Please ensure you have an adblocker enabled to avoid redirection and unwanted ads. Consider using a trusted adblocker like <a href="https://ublockorigin.com" target="_blank">uBlock Origin</a>.</p>
        <p>Enjoy! 😃</p>
        <button onclick="dismissAdblockWarning()">Dismiss</button>
    </div>

    <script>
        // OMDb API configuration
        const OMDB_API_KEY = 'afcd4c24';
        const OMDB_BASE_URL = 'https://www.omdbapi.com/';

        // Sample movie data with popular movies
        const movieData = {
            featured: [
                {
                    id: "tt0111161",
                    title: "The Shawshank Redemption",
                    year: 1994,
                    rating: 4.8,
                    views: "15.2M",
                    description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0111161",
                    type: "movie"
                },
                {
                    id: "tt0468569",
                    title: "The Dark Knight",
                    year: 2008,
                    rating: 4.6,
                    views: "18.5M",
                    description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg",
                    imdbID: "tt0468569",
                    type: "movie"
                },
                {
                    id: "tt1375666",
                    title: "Inception",
                    year: 2010,
                    rating: 4.4,
                    views: "17.3M",
                    description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg",
                    imdbID: "tt1375666",
                    type: "movie"
                },
                {
                    id: "tt0133093",
                    title: "The Matrix",
                    year: 1999,
                    rating: 4.2,
                    views: "13.7M",
                    description: "A computer programmer is led to fight an underground war against powerful computers who have constructed his entire reality with a system called the Matrix.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzQzOTk3OTAtNDQ0Zi00ZTVkLWI0MTEtMDllZjNkYzNjNTc4L2ltYWdlXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0133093",
                    type: "movie"
                },
                {
                    id: "tt0816692",
                    title: "Interstellar",
                    year: 2014,
                    rating: 4.3,
                    views: "14.6M",
                    description: "A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0816692",
                    type: "movie"
                },
                {
                    id: "tt0120737",
                    title: "The Lord of the Rings: The Fellowship of the Ring",
                    year: 2001,
                    rating: 4.4,
                    views: "15.1M",
                    description: "A meek Hobbit from the Shire and eight companions set out on a journey to destroy the powerful One Ring and save Middle-earth from the Dark Lord Sauron.",
                    poster: "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ1MjY@._V1_SX300.jpg",
                    imdbID: "tt0120737",
                    type: "movie"
                }
            ],
            trending: [
                {
                    id: "tt0111161",
                    title: "The Shawshank Redemption",
                    year: 1994,
                    rating: 4.8,
                    views: "15.2M",
                    description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0111161",
                    type: "movie"
                },
                {
                    id: "tt0068646",
                    title: "The Godfather",
                    year: 1972,
                    rating: 4.7,
                    views: "12.8M",
                    description: "An organized crime dynasty's aging patriarch transfers control of his clandestine empire to his reluctant son.",
                    poster: "https://m.media-amazon.com/images/M/MV5BM2MyNjYxNmUtYTAwNi00MTYxLWJmNWYtYzZlODY3ZTk3OTFlXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg",
                    imdbID: "tt0068646",
                    type: "movie"
                },
                {
                    id: "tt0468569",
                    title: "The Dark Knight",
                    year: 2008,
                    rating: 4.6,
                    views: "18.5M",
                    description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg",
                    imdbID: "tt0468569",
                    type: "movie"
                },
                {
                    id: "tt0050083",
                    title: "12 Angry Men",
                    year: 1957,
                    rating: 4.5,
                    views: "8.9M",
                    description: "A jury holdout attempts to prevent a miscarriage of justice by forcing his colleagues to reconsider the evidence.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMWU4N2FjNzYtNTVkNC00NzQ0LTg0MjAtYTJlMjFhNGUxZDFmXkEyXkFqcGdeQXVyNjc1NTYyMjg@._V1_SX300.jpg",
                    imdbID: "tt0050083",
                    type: "movie"
                },
                {
                    id: "tt0108052",
                    title: "Schindler's List",
                    year: 1993,
                    rating: 4.7,
                    views: "11.3M",
                    description: "In German-occupied Poland during World War II, industrialist Oskar Schindler gradually becomes concerned for his Jewish workforce after witnessing their persecution by the Nazis.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNDE4OTMxMTctNmRhYy00NWE2LTg3YzItYTk3M2UwOTU5Njg4XkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0108052",
                    type: "movie"
                }
            ],
            topRated: [
                {
                    id: "tt0167260",
                    title: "The Lord of the Rings: The Return of the King",
                    year: 2003,
                    rating: 4.6,
                    views: "14.7M",
                    description: "Gandalf and Aragorn lead the World of Men against Sauron's army to draw his gaze from Frodo and Sam as they approach Mount Doom with the One Ring.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzA5ZDNlZWMtM2NhNS00NDJjLTk4NDItYTRmY2EwMWI5MTktXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg",
                    imdbID: "tt0167260",
                    type: "movie"
                },
                {
                    id: "tt0110912",
                    title: "Pulp Fiction",
                    year: 1994,
                    rating: 4.5,
                    views: "13.2M",
                    description: "The lives of two mob hitmen, a boxer, a gangster and his wife, and a pair of diner bandits intertwine in four tales of violence and redemption.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNGNhMDIzZTUtNTBlZi00MTRlLWFjM2ItYzViMjE3YzI5MjljXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg",
                    imdbID: "tt0110912",
                    type: "movie"
                },
                {
                    id: "tt0167261",
                    title: "The Lord of the Rings: The Two Towers",
                    year: 2002,
                    rating: 4.4,
                    views: "12.9M",
                    description: "While Frodo and Sam edge closer to Mordor with the help of the shifty Gollum, the divided fellowship makes a stand against Sauron's new ally, Saruman, and his hordes of Isengard.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZGMxZTdjZmYtMmE2Ni00ZTdkLWI5NTgtNjlmMjBiNzU2MmI5XkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0167261",
                    type: "movie"
                },
                {
                    id: "tt0120737",
                    title: "The Lord of the Rings: The Fellowship of the Ring",
                    year: 2001,
                    rating: 4.4,
                    views: "15.1M",
                    description: "A meek Hobbit from the Shire and eight companions set out on a journey to destroy the powerful One Ring and save Middle-earth from the Dark Lord Sauron.",
                    poster: "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ1MjY@._V1_SX300.jpg",
                    imdbID: "tt0120737",
                    type: "movie"
                },
                {
                    id: "tt0109830",
                    title: "Forrest Gump",
                    year: 1994,
                    rating: 4.3,
                    views: "16.8M",
                    description: "The presidencies of Kennedy and Johnson, the Vietnam War, the Watergate scandal and other historical events unfold from the perspective of an Alabama man with an IQ of 75.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNWIwODRlZTUtY2U3ZS00Yzg1LWE5ZWItZDBhYWQ0NTcxNWRhXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg",
                    imdbID: "tt0109830",
                    type: "movie"
                }
            ],
            recentlyAdded: [
                {
                    id: "tt1375666",
                    title: "Inception",
                    year: 2010,
                    rating: 4.4,
                    views: "17.3M",
                    description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg",
                    imdbID: "tt1375666",
                    type: "movie"
                },
                {
                    id: "tt0816692",
                    title: "Interstellar",
                    year: 2014,
                    rating: 4.3,
                    views: "14.6M",
                    description: "A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0816692",
                    type: "movie"
                },
                {
                    id: "tt0133093",
                    title: "The Matrix",
                    year: 1999,
                    rating: 4.2,
                    views: "13.7M",
                    description: "A computer programmer is led to fight an underground war against powerful computers who have constructed his entire reality with a system called the Matrix.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzQzOTk3OTAtNDQ0Zi00ZTVkLWI0MTEtMDllZjNkYzNjNTc4L2ltYWdlXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0133093",
                    type: "movie"
                },
                {
                    id: "tt0245429",
                    title: "Spirited Away",
                    year: 2001,
                    rating: 4.1,
                    views: "9.8M",
                    description: "During her family's move to the suburbs, a sullen 10-year-old girl wanders into a world ruled by gods, witches, and spirits, and where humans are changed into beasts.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjlmZmI5MDctNDE2YS00YWE0LWE5ZWItZDBhYWQ0NTcxNWRhXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0245429",
                    type: "movie"
                },
                {
                    id: "tt0317248",
                    title: "City of God",
                    year: 2002,
                    rating: 4.2,
                    views: "7.5M",
                    description: "In the slums of Rio, two kids' paths diverge as one struggles to become a photographer and the other a kingpin.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjA4ODQ3ODkzNV5BMl5BanBnXkFtZTYwOTc4NDI3._V1_SX300.jpg",
                    imdbID: "tt0317248",
                    type: "movie"
                }
            ]
        };

        // Global variables
        let currentHeroSlide = 0;
        let heroInterval;
        let currentMovie = null;
        let isPlaying = false;
        let currentMedia = { imdbID: '', title: '', year: '', type: '' };
        let allMovies = {}; // Store all movies for filtering

        // Local storage keys
        const STORAGE_KEYS = {
            likes: 'streamflix_likes',
            dislikes: 'streamflix_dislikes',
            watchLater: 'streamflix_watch_later',
            continueWatching: 'streamflix_continue_watching',
            watchHistory: 'streamflix_watch_history'
        };

        // DOM elements
        const elements = {
            heroCarousel: document.getElementById('heroCarousel'),
            searchBtn: document.getElementById('searchBtn'),
            searchOverlay: document.getElementById('searchOverlay'),
            searchInput: document.getElementById('searchInput'),
            searchClose: document.getElementById('searchClose'),
            suggestions: document.getElementById('suggestions'),
            movieModal: document.getElementById('movieModal'),
            closeModal: document.getElementById('closeModal'),
            playBtn: document.getElementById('playBtn'),
            videoPlayer: document.getElementById('videoPlayer'),
            backBtn: document.getElementById('backBtn'),
            embedPlayer: document.getElementById('embedPlayer'),
            navbar: document.querySelector('.navbar'),
            trendingRow: document.getElementById('trendingRow'),
            topRatedRow: document.getElementById('topRatedRow'),
            recentlyAddedRow: document.getElementById('recentlyAddedRow'),
            continueWatchingSection: document.getElementById('continueWatchingSection'),
            continueWatchingRow: document.getElementById('continueWatchingRow'),
            genresDropdown: document.getElementById('genresDropdown'),
            genresDropdownContent: document.getElementById('genresDropdownContent'),
            accountDropdown: document.getElementById('accountDropdown'),
            accountDropdownContent: document.getElementById('accountDropdownContent'),
            myFavoritesPage: document.getElementById('myFavoritesPage'),
            watchLaterPage: document.getElementById('watchLaterPage'),
            watchHistoryPage: document.getElementById('watchHistoryPage'),
            favoritesGrid: document.getElementById('favoritesGrid'),
            watchLaterGrid: document.getElementById('watchLaterGrid'),
            historyGrid: document.getElementById('historyGrid'),
            favoritesBackBtn: document.getElementById('favoritesBackBtn'),
            watchLaterBackBtn: document.getElementById('watchLaterBackBtn'),
            historyBackBtn: document.getElementById('historyBackBtn')
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupEventListeners();
            createHeroCarousel();
            populateMovieRows();
            updateContinueWatchingSection();
            startHeroCarousel();
            showAdblockWarning();
            // Store all movies for filtering
            allMovies = {
                trending: movieData.trending,
                topRated: movieData.topRated,
                recentlyAdded: movieData.recentlyAdded
            };
        }

        function setupEventListeners() {
            // Navigation
            if (elements.searchBtn) elements.searchBtn.addEventListener('click', toggleSearch);
            if (elements.searchClose) elements.searchClose.addEventListener('click', toggleSearch);
            if (elements.searchInput) elements.searchInput.addEventListener('input', handleSearch);
            
            // Dropdown menus
            if (elements.genresDropdown) {
                elements.genresDropdown.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleDropdown('genresDropdownContent');
                });
            }
            
            if (elements.accountDropdown) {
                elements.accountDropdown.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleDropdown('accountDropdownContent');
                });
            }
            
            // Genre selection
            if (elements.genresDropdownContent) {
                elements.genresDropdownContent.addEventListener('click', (e) => {
                    if (e.target.dataset.genre) {
                        e.preventDefault();
                        filterByGenre(e.target.dataset.genre);
                        closeDropdowns();
                    }
                });
            }
            
            // Modal
            if (elements.closeModal) elements.closeModal.addEventListener('click', closeModal);
            if (elements.movieModal) {
                elements.movieModal.addEventListener('click', (e) => {
                    if (e.target === elements.movieModal) closeModal();
                });
            }

            // Video player
            if (elements.playBtn) elements.playBtn.addEventListener('click', openVideoPlayer);
            if (elements.backBtn) elements.backBtn.addEventListener('click', closeVideoPlayer);
            
            // Account settings
            if (elements.accountDropdownContent) {
                elements.accountDropdownContent.addEventListener('click', (e) => {
                    if (e.target.closest('a')) {
                        const linkText = e.target.closest('a').textContent;
                        if (linkText.includes('Account Settings')) {
                            e.preventDefault();
                            openAccountSettings();
                            closeDropdowns();
                        } else if (linkText.includes('My Favorites')) {
                            e.preventDefault();
                            openMyFavorites();
                            closeDropdowns();
                        } else if (linkText.includes('Watch Later')) {
                            e.preventDefault();
                            openWatchLater();
                            closeDropdowns();
                        } else if (linkText.includes('Watch History')) {
                            e.preventDefault();
                            openWatchHistory();
                            closeDropdowns();
                        }
                    }
                });
            }
            
            // Page navigation
            if (elements.favoritesBackBtn) elements.favoritesBackBtn.addEventListener('click', closePage);
            if (elements.watchLaterBackBtn) elements.watchLaterBackBtn.addEventListener('click', closePage);
            if (elements.historyBackBtn) elements.historyBackBtn.addEventListener('click', closePage);
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-dropdown')) {
                    closeDropdowns();
                }
                if (!e.target.closest('.search-container')) {
                    clearSuggestions();
                }
            });
            
            // Close search on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (elements.searchOverlay.classList.contains('active')) {
                        toggleSearch();
                    } else if (elements.movieModal.classList.contains('active')) {
                        closeModal();
                    } else if (elements.videoPlayer.classList.contains('active')) {
                        closeVideoPlayer();
                    } else if (document.querySelector('.page-overlay.active')) {
                        closePage();
                    } else {
                        closeDropdowns();
                    }
                }
            });
        }

        // Search functionality with OMDb API
        async function handleSearch(e) {
            const query = e.target.value.trim();
            if (query.length < 3) {
                clearSuggestions();
                return;
            }
            
            try {
                const response = await fetch(`${OMDB_BASE_URL}?s=${encodeURIComponent(query)}&apikey=${OMDB_API_KEY}`);
                const data = await response.json();
                
                if (data.Response === 'True') {
                    displaySearchSuggestions(data.Search.slice(0, 8)); // Limit to 8 results
                } else {
                    clearSuggestions();
                }
            } catch (error) {
                console.error('Search error:', error);
                clearSuggestions();
            }
        }

        function displaySearchSuggestions(results) {
            const suggestionsDiv = elements.suggestions;
            suggestionsDiv.innerHTML = '';
            
            results.forEach(item => {
                const suggestionItem = document.createElement('div');
                suggestionItem.className = 'suggestion-item';
                
                const poster = item.Poster !== 'N/A' ? item.Poster : 'https://via.placeholder.com/50x75?text=No+Image';
                
                suggestionItem.innerHTML = `
                    <img src="${poster}" alt="${item.Title}" onerror="this.src='https://via.placeholder.com/50x75?text=No+Image'">
                    <div class="suggestion-info">
                        <div class="suggestion-title">${item.Title}</div>
                        <div class="suggestion-meta">${item.Year} • ${item.Type}</div>
                    </div>
                `;
                
                suggestionItem.addEventListener('click', () => selectSearchResult(item));
                suggestionsDiv.appendChild(suggestionItem);
            });
        }

        async function selectSearchResult(item) {
            try {
                // Get detailed information
                const response = await fetch(`${OMDB_BASE_URL}?i=${item.imdbID}&apikey=${OMDB_API_KEY}&plot=full`);
                const details = await response.json();
                
                if (details.Response === 'True') {
                    const movie = {
                        id: item.imdbID,
                        title: details.Title,
                        year: details.Year,
                        rating: details.imdbRating !== 'N/A' ? parseFloat(details.imdbRating) / 2 : 4.0, // Convert to 5-star scale
                        views: `${Math.floor(Math.random() * 10) + 1}.${Math.floor(Math.random() * 10)}M`,
                        description: details.Plot !== 'N/A' ? details.Plot : 'No description available.',
                        poster: details.Poster !== 'N/A' ? details.Poster : 'https://via.placeholder.com/400x600?text=No+Image',
                        imdbID: item.imdbID,
                        type: item.Type,
                        genre: details.Genre
                    };
                    
                    openMovieModal(movie);
                }
            } catch (error) {
                console.error('Error fetching movie details:', error);
            }
        }

        function clearSuggestions() {
            elements.suggestions.innerHTML = '';
        }

        function toggleDropdown(dropdownId) {
            closeDropdowns();
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.add('active');
        }

        function closeDropdowns() {
            document.querySelectorAll('.dropdown-content').forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        }

        async function filterByGenre(genre) {
            console.log('Filtering by genre:', genre);
            
            // Show loading state
            const sections = ['trending', 'topRated', 'recentlyAdded'];
            sections.forEach(section => {
                const container = document.getElementById(section + 'Row');
                container.innerHTML = '<div style="color: #fff; padding: 2rem; text-align: center;">Loading...</div>';
            });
            
            try {
                const genreQueries = {
                    'action': 'action',
                    'comedy': 'comedy',
                    'drama': 'drama',
                    'horror': 'horror',
                    'romance': 'romance',
                    'thriller': 'thriller',
                    'sci-fi': 'science fiction',
                    'documentary': 'documentary'
                };
                
                const searchQuery = genreQueries[genre] || genre;
                const response = await fetch(`${OMDB_BASE_URL}?s=${encodeURIComponent(searchQuery)}&type=movie&apikey=${OMDB_API_KEY}`);
                const data = await response.json();
                
                if (data.Response === 'True') {
                    const moviePromises = data.Search.slice(0, 15).map(async (movie) => {
                        try {
                            const detailResponse = await fetch(`${OMDB_BASE_URL}?i=${movie.imdbID}&apikey=${OMDB_API_KEY}`);
                            const details = await detailResponse.json();
                            
                            if (details.Response === 'True') {
                                return {
                                    id: movie.imdbID,
                                    title: details.Title,
                                    year: details.Year,
                                    rating: details.imdbRating !== 'N/A' ? parseFloat(details.imdbRating) / 2 : 4.0,
                                    views: `${Math.floor(Math.random() * 10) + 1}.${Math.floor(Math.random() * 10)}M`,
                                    description: details.Plot !== 'N/A' ? details.Plot : 'No description available.',
                                    poster: details.Poster !== 'N/A' ? details.Poster : 'https://via.placeholder.com/400x600?text=No+Image',
                                    imdbID: movie.imdbID,
                                    type: movie.Type,
                                    genre: details.Genre
                                };
                            }
                        } catch (error) {
                            console.error('Error fetching movie details:', error);
                            return null;
                        }
                    });
                    
                    const movies = (await Promise.all(moviePromises)).filter(movie => movie !== null);
                    
                    const genreTitles = {
                        'action': { title: 'Action Movies', description: 'Explosive adventures and thrilling action sequences' },
                        'comedy': { title: 'Comedy Movies', description: 'Hilarious films to brighten your day' },
                        'drama': { title: 'Drama Movies', description: 'Compelling stories that touch the heart' },
                        'horror': { title: 'Horror Movies', description: 'Spine-chilling thrills and supernatural scares' },
                        'romance': { title: 'Romance Movies', description: 'Love stories that warm the heart' },
                        'thriller': { title: 'Thriller Movies', description: 'Edge-of-your-seat suspense and mystery' },
                        'sci-fi': { title: 'Sci-Fi Movies', description: 'Futuristic adventures and scientific wonders' },
                        'documentary': { title: 'Documentary Movies', description: 'Real stories and educational content' }
                    };
                    
                    const genreInfo = genreTitles[genre] || { title: `${genre.charAt(0).toUpperCase() + genre.slice(1)} Movies`, description: 'Curated selection of movies' };
                    
                    document.querySelector('#trendingRow').previousElementSibling.innerHTML = `
                        <h2>${genreInfo.title}</h2>
                        <p style="color: #cccccc; font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1rem;">${genreInfo.description}</p>
                    `;
                    
                    const trending = movies.slice(0, 5);
                    const topRated = movies.slice(5, 10);
                    const recentlyAdded = movies.slice(10, 15);
                    
                    populateMovieRow(elements.trendingRow, trending);
                    populateMovieRow(elements.topRatedRow, topRated);
                    populateMovieRow(elements.recentlyAddedRow, recentlyAdded);
                    
                } else {
                    // Fallback to original movies if no results
                    resetToOriginalMovies();
                }
            } catch (error) {
                console.error('Error filtering by genre:', error);
                resetToOriginalMovies();
            }
        }

        function resetToOriginalMovies() {
            // Reset section titles
            const sections = document.querySelectorAll('.content-section');
            sections[0].querySelector('h2').textContent = 'Trending Now';
            sections[1].querySelector('h2').textContent = 'Top Rated';
            sections[2].querySelector('h2').textContent = 'Recently Added';
            
            // Remove description if it exists
            const existingDesc = document.querySelector('#trendingRow').previousElementSibling.querySelector('p');
            if (existingDesc) {
                existingDesc.remove();
            }
            
            populateMovieRow(elements.trendingRow, allMovies.trending);
            populateMovieRow(elements.topRatedRow, allMovies.topRated);
            populateMovieRow(elements.recentlyAddedRow, allMovies.recentlyAdded);
        }

        function openAccountSettings() {
            // Create account settings modal
            const accountModal = document.createElement('div');
            accountModal.className = 'modal-overlay account-settings-modal';
            accountModal.id = 'accountSettingsModal';
            
            accountModal.innerHTML = `
                <div class="account-settings">
                    <button class="close-btn" onclick="closeAccountSettings()">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="account-settings-content">
                        <h2>Account Settings</h2>
                        
                        <div class="settings-section">
                            <h3>Profile Information</h3>
                            <div class="setting-item">
                                <label for="username">Username</label>
                                <input type="text" id="username" value="StreamFlixUser" readonly>
                            </div>
                            <div class="setting-item">
                                <label for="email">Email</label>
                                <input type="email" id="email" value="user@streamflix.com" readonly>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Playback Settings</h3>
                            <div class="setting-item">
                                <label for="autoplay">Auto-play next episode</label>
                                <input type="checkbox" id="autoplay" checked>
                            </div>
                            <div class="setting-item">
                                <label for="quality">Default video quality</label>
                                <select id="quality">
                                    <option value="auto">Auto</option>
                                    <option value="1080p">1080p</option>
                                    <option value="720p">720p</option>
                                    <option value="480p">480p</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Privacy & Data</h3>
                            <div class="setting-item">
                                <label for="watchHistory">Save watch history</label>
                                <input type="checkbox" id="watchHistory" checked>
                            </div>
                            <div class="setting-item">
                                <label for="recommendations">Personalized recommendations</label>
                                <input type="checkbox" id="recommendations" checked>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Notifications</h3>
                            <div class="setting-item">
                                <label for="emailNotifications">Email notifications</label>
                                <input type="checkbox" id="emailNotifications">
                            </div>
                            <div class="setting-item">
                                <label for="newReleases">New releases alerts</label>
                                <input type="checkbox" id="newReleases" checked>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="action-btn primary" onclick="saveAccountSettings()">Save Changes</button>
                            <button class="action-btn secondary" onclick="resetAccountSettings()">Reset to Default</button>
                            <button class="action-btn danger" onclick="clearAllData()">Clear All Data</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(accountModal);
            accountModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Load saved settings
            loadAccountSettings();
        }

        function closeAccountSettings() {
            const modal = document.getElementById('accountSettingsModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        function loadAccountSettings() {
            const settings = JSON.parse(localStorage.getItem('streamflix_settings')) || {};
            
            if (settings.autoplay !== undefined) {
                document.getElementById('autoplay').checked = settings.autoplay;
            }
            if (settings.quality) {
                document.getElementById('quality').value = settings.quality;
            }
            if (settings.watchHistory !== undefined) {
                document.getElementById('watchHistory').checked = settings.watchHistory;
            }
            if (settings.recommendations !== undefined) {
                document.getElementById('recommendations').checked = settings.recommendations;
            }
            if (settings.emailNotifications !== undefined) {
                document.getElementById('emailNotifications').checked = settings.emailNotifications;
            }
            if (settings.newReleases !== undefined) {
                document.getElementById('newReleases').checked = settings.newReleases;
            }
        }

        function saveAccountSettings() {
            const settings = {
                autoplay: document.getElementById('autoplay').checked,
                quality: document.getElementById('quality').value,
                watchHistory: document.getElementById('watchHistory').checked,
                recommendations: document.getElementById('recommendations').checked,
                emailNotifications: document.getElementById('emailNotifications').checked,
                newReleases: document.getElementById('newReleases').checked
            };
            
            localStorage.setItem('streamflix_settings', JSON.stringify(settings));
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'success-message';
            successMsg.textContent = 'Settings saved successfully!';
            successMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 1rem;
                border-radius: 8px;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;
            
            document.body.appendChild(successMsg);
            setTimeout(() => successMsg.style.opacity = '1', 100);
            setTimeout(() => {
                successMsg.style.opacity = '0';
                setTimeout(() => successMsg.remove(), 300);
            }, 2000);
        }

        function resetAccountSettings() {
            document.getElementById('autoplay').checked = true;
            document.getElementById('quality').value = 'auto';
            document.getElementById('watchHistory').checked = true;
            document.getElementById('recommendations').checked = true;
            document.getElementById('emailNotifications').checked = false;
            document.getElementById('newReleases').checked = true;
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This will remove your watch history, likes, and saved movies.')) {
                localStorage.clear();
                alert('All data has been cleared.');
                closeAccountSettings();
                // Refresh the page to reset everything
                window.location.reload();
            }
        }

        function handleScroll() {
            // Remove scroll effect since Tubi has solid navbar
        }

        function toggleSearch() {
            elements.searchOverlay.classList.toggle('active');
            if (elements.searchOverlay.classList.contains('active')) {
                elements.searchInput.focus();
            } else {
                elements.searchInput.value = '';
                clearSuggestions();
            }
        }

        function createHeroCarousel() {
            elements.heroCarousel.innerHTML = '';
            
            movieData.featured.forEach((movie, index) => {
                const slide = document.createElement('div');
                slide.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}">
                    <div class="hero-overlay">
                        <div class="hero-content">
                            <h2>${movie.title}</h2>
                            <p>${movie.description}</p>
                        </div>
                    </div>
                `;
                slide.addEventListener('click', () => openMovieModal(movie));
                elements.heroCarousel.appendChild(slide);
            });
        }

        function startHeroCarousel() {
            heroInterval = setInterval(() => {
                changeHeroSlide(1);
            }, 6000);
        }

        function changeHeroSlide(direction) {
            const slides = document.querySelectorAll('.hero-slide');
            slides[currentHeroSlide].classList.remove('active');
            
            currentHeroSlide += direction;
            if (currentHeroSlide >= slides.length) currentHeroSlide = 0;
            if (currentHeroSlide < 0) currentHeroSlide = slides.length - 1;
            
            slides[currentHeroSlide].classList.add('active');
        }

        function populateMovieRows() {
            populateMovieRow(elements.trendingRow, movieData.trending);
            populateMovieRow(elements.topRatedRow, movieData.topRated);
            populateMovieRow(elements.recentlyAddedRow, movieData.recentlyAdded);
        }

        function populateMovieRow(container, movies) {
            container.innerHTML = '';
            
            movies.forEach(movie => {
                const movieCard = createMovieCard(movie);
                container.appendChild(movieCard);
            });
        }

        function createMovieCard(movie) {
            const card = document.createElement('div');
            card.className = 'movie-card';
            
            const continueWatching = getContinueWatchingData();
            const progress = continueWatching[movie.id]?.progress || 0;
            
            card.innerHTML = `
                <div class="movie-poster">
                    <img src="${movie.poster}" alt="${movie.title}">
                    ${progress > 0 ? `<div class="progress-indicator" style="width: ${progress}%"></div>` : ''}
                </div>
                <div class="movie-info">
                    <div class="movie-title">${movie.title}</div>
                    <div class="movie-meta">
                        <div class="rating">
                            <div class="stars">${generateStars(movie.rating)}</div>
                            <span class="rating-text">${movie.rating}</span>
                        </div>
                        <div class="views">${movie.views} views</div>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => openMovieModal(movie));
            
            return card;
        }

        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let starsHtml = '';
            
            for (let i = 0; i < fullStars; i++) {
                starsHtml += '<i class="fas fa-star star"></i>';
            }
            
            if (hasHalfStar) {
                starsHtml += '<i class="fas fa-star-half-alt star"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                starsHtml += '<i class="far fa-star star"></i>';
            }
            
            return starsHtml;
        }

        function openMovieModal(movie) {
            currentMovie = movie;
            currentMedia = { 
                imdbID: movie.imdbID, 
                title: movie.title, 
                year: movie.year, 
                type: movie.type || 'movie' 
            };
            
            // Update modal content
            document.getElementById('modalPoster').src = movie.poster;
            document.getElementById('modalTitle').textContent = movie.title;
            document.getElementById('modalYear').textContent = movie.year;
            document.getElementById('modalStars').innerHTML = generateStars(movie.rating);
            document.getElementById('modalRating').textContent = movie.rating;
            document.getElementById('modalViews').textContent = `${movie.views} views`;
            document.getElementById('modalDescription').textContent = movie.description;
            
            const tvShowControls = document.getElementById('tvShowControls');
            const seasonNumber = document.getElementById('seasonNumber');
            const episodeNumber = document.getElementById('episodeNumber');
            
            // Show/hide TV show controls
            if (tvShowControls) {
                if (movie.type === 'series') {
                    tvShowControls.style.display = 'block';
                } else {
                    tvShowControls.style.display = 'none';
                }
            }
            
            // Update action buttons
            updateActionButtons(movie);
            
            // Show modal
            elements.movieModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Setup action button listeners
            setupActionButtons(movie);
        }

        function filterEmbedSources(isTVShow) {
            const embedSource = elements.embedSource;
            const options = embedSource.options;
            
            for (let i = 0; i < options.length; i++) {
                if (isTVShow) {
                    // Only show TV-compatible sources
                    const tvSources = ['embed.su', 'vidsrc.me', 'smashy.stream', '2embed.cc', 'vidsrc.vip'];
                    options[i].style.display = tvSources.includes(options[i].value) ? 'block' : 'none';
                } else {
                    // Show all sources for movies
                    options[i].style.display = 'block';
                }
            }
        }

        function updateActionButtons(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            const watchLater = getWatchLaterMovies();
            
            const likeBtn = document.getElementById('likeBtn');
            const dislikeBtn = document.getElementById('dislikeBtn');
            const watchLaterBtn = document.getElementById('watchLaterBtn');
            
            // Update like button
            if (likes.includes(movie.id)) {
                likeBtn.classList.add('active');
                likeBtn.querySelector('i').className = 'fas fa-thumbs-up';
            } else {
                likeBtn.classList.remove('active');
                likeBtn.querySelector('i').className = 'far fa-thumbs-up';
            }
            
            // Update dislike button
            if (dislikes.includes(movie.id)) {
                dislikeBtn.classList.add('active');
                dislikeBtn.querySelector('i').className = 'fas fa-thumbs-down';
            } else {
                dislikeBtn.classList.remove('active');
                dislikeBtn.querySelector('i').className = 'far fa-thumbs-down';
            }
            
            // Update watch later button
            if (watchLater.some(m => m.id === movie.id)) {
                watchLaterBtn.classList.add('active');
                watchLaterBtn.querySelector('i').className = 'fas fa-bookmark';
                watchLaterBtn.querySelector('span').textContent = 'Saved';
            } else {
                watchLaterBtn.classList.remove('active');
                watchLaterBtn.querySelector('i').className = 'far fa-bookmark';
                watchLaterBtn.querySelector('span').textContent = 'Watch Later';
            }
        }

        function setupActionButtons(movie) {
            const likeBtn = document.getElementById('likeBtn');
            const dislikeBtn = document.getElementById('dislikeBtn');
            const watchLaterBtn = document.getElementById('watchLaterBtn');
            
            // Remove existing listeners
            likeBtn.replaceWith(likeBtn.cloneNode(true));
            dislikeBtn.replaceWith(dislikeBtn.cloneNode(true));
            watchLaterBtn.replaceWith(watchLaterBtn.cloneNode(true));
            
            // Get fresh references
            const newLikeBtn = document.getElementById('likeBtn');
            const newDislikeBtn = document.getElementById('dislikeBtn');
            const newWatchLaterBtn = document.getElementById('watchLaterBtn');
            
            // Add new listeners
            newLikeBtn.addEventListener('click', () => toggleLike(movie));
            newDislikeBtn.addEventListener('click', () => toggleDislike(movie));
            newWatchLaterBtn.addEventListener('click', () => toggleWatchLater(movie));
        }

        function closeModal() {
            elements.movieModal.classList.remove('active');
            document.body.style.overflow = '';
            currentMovie = null;
            currentMedia = { imdbID: '', title: '', year: '', type: '' };
        }

        function openVideoPlayer() {
            if (!currentMovie || !currentMovie.imdbID) return;
            
            elements.videoPlayer.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Use vidlink.pro for both movies and TV shows
            let embedLink;
            if (currentMovie.type === 'series') {
                const seasonNumber = elements.seasonNumber.value || '1';
                const episodeNumber = elements.episodeNumber.value || '1';
                embedLink = `https://vidlink.pro/tv/${currentMovie.imdbID}/${seasonNumber}/${episodeNumber}`;
            } else {
                embedLink = `https://vidlink.pro/movie/${currentMovie.imdbID}`;
            }
            
            elements.embedPlayer.innerHTML = `
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="${embedLink}" 
                    frameborder="0" 
                    allowfullscreen
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
                </iframe>
            `;
            
            // Add to continue watching and watch history
            addToContinueWatching(currentMovie);
            addToWatchHistory(currentMovie);
            
            // Close the modal when opening video player
            closeModal();
        }

        function updateEmbed() {
            const { imdbID, title, year, type } = currentMedia;
            if (!imdbID) return;

            // Always use vidlink.pro
            let embedLink = '';
            if (type === 'movie') {
                embedLink = `https://vidlink.pro/movie/${imdbID}`;
            } else if (type === 'series') {
                const seasonNumber = elements.seasonNumber.value || '1';
                const episodeNumber = elements.episodeNumber.value || '1';
                embedLink = `https://vidlink.pro/tv/${imdbID}/${seasonNumber}/${episodeNumber}`;
            }

            elements.embedPlayer.innerHTML = `
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="${embedLink}" 
                    frameborder="0" 
                    allowfullscreen
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
                </iframe>
            `;
        }

        function closeVideoPlayer() {
            elements.videoPlayer.classList.remove('active');
            document.body.style.overflow = '';
            
            // Clear the embed
            elements.embedPlayer.innerHTML = '';
        }

        function showAdblockWarning() {
            const warning = document.getElementById('adblockWarning');
            if (warning) {
                warning.style.display = 'block';
                setTimeout(() => {
                    warning.style.display = 'none';
                }, 5000); // Auto-dismiss after 5 seconds
            }
        }

        function dismissAdblockWarning() {
            const warning = document.getElementById('adblockWarning');
            if (warning) {
                warning.style.display = 'none';
            }
        }

        // Local Storage Functions
        function getLikedMovies() {
            const likes = localStorage.getItem(STORAGE_KEYS.likes);
            return likes ? JSON.parse(likes) : [];
        }

        function getDislikedMovies() {
            const dislikes = localStorage.getItem(STORAGE_KEYS.dislikes);
            return dislikes ? JSON.parse(dislikes) : [];
        }

        function getWatchLaterMovies() {
            const watchLater = localStorage.getItem(STORAGE_KEYS.watchLater);
            return watchLater ? JSON.parse(watchLater) : [];
        }

        function getContinueWatchingData() {
            const continueWatching = localStorage.getItem(STORAGE_KEYS.continueWatching);
            return continueWatching ? JSON.parse(continueWatching) : {};
        }

        function getWatchHistoryData() {
            const watchHistory = localStorage.getItem(STORAGE_KEYS.watchHistory);
            return watchHistory ? JSON.parse(watchHistory) : {};
        }

        function addToWatchHistory(movie) {
            const watchHistory = getWatchHistoryData();
            watchHistory[movie.id] = {
                movie: movie,
                timestamp: Date.now()
            };
            localStorage.setItem(STORAGE_KEYS.watchHistory, JSON.stringify(watchHistory));
        }

        function toggleLike(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            
            if (likes.includes(movie.id)) {
                // Remove from likes
                const updatedLikes = likes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
            } else {
                // Add to likes and remove from dislikes if present
                const updatedLikes = [...likes, movie.id];
                const updatedDislikes = dislikes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
            }
            
            updateActionButtons(movie);
        }

        function toggleDislike(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            
            if (dislikes.includes(movie.id)) {
                // Remove from dislikes
                const updatedDislikes = dislikes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
            } else {
                // Add to dislikes and remove from likes if present
                const updatedDislikes = [...dislikes, movie.id];
                const updatedLikes = likes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
            }
            
            updateActionButtons(movie);
        }

        function toggleWatchLater(movie) {
            const watchLater = getWatchLaterMovies();
            
            if (watchLater.some(m => m.id === movie.id)) {
                // Remove from watch later
                const updatedWatchLater = watchLater.filter(m => m.id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.watchLater, JSON.stringify(updatedWatchLater));
            } else {
                // Add to watch later
                const updatedWatchLater = [...watchLater, movie];
                localStorage.setItem(STORAGE_KEYS.watchLater, JSON.stringify(updatedWatchLater));
            }
            
            updateActionButtons(movie);
            updateWatchLaterSection();
        }

        function addToContinueWatching(movie) {
            const continueWatching = getContinueWatchingData();
            continueWatching[movie.id] = {
                movie: movie,
                timestamp: Date.now(),
                progress: 0
            };
            localStorage.setItem(STORAGE_KEYS.continueWatching, JSON.stringify(continueWatching));
            updateContinueWatchingSection();
        }

        function updateContinueWatchingProgress(movieId, progress) {
            const continueWatching = getContinueWatchingData();
            if (continueWatching[movieId]) {
                continueWatching[movieId].progress = progress;
                continueWatching[movieId].timestamp = Date.now();
                localStorage.setItem(STORAGE_KEYS.continueWatching, JSON.stringify(continueWatching));
            }
        }

        function updateWatchLaterSection() {
            // Remove this function's implementation since we're removing watch later from homepage
        }

        function updateContinueWatchingSection() {
            const continueWatchingData = getContinueWatchingData();
            const continueWatchingMovies = Object.values(continueWatchingData)
                .sort((a, b) => b.timestamp - a.timestamp)
                .slice(0, 10)
                .map(item => item.movie);
            
            if (continueWatchingMovies.length > 0) {
                elements.continueWatchingSection.style.display = 'block';
                populateMovieRow(elements.continueWatchingRow, continueWatchingMovies);
            } else {
                elements.continueWatchingSection.style.display = 'none';
            }
        }

        // Page Functions
        function openMyFavorites() {
            const likes = getLikedMovies();
            const allMoviesFlat = [...movieData.trending, ...movieData.topRated, ...movieData.recentlyAdded];
            const favoriteMovies = allMoviesFlat.filter(movie => likes.includes(movie.id));
            
            populateMoviesGrid(elements.favoritesGrid, favoriteMovies, 'No favorites yet', 'Start liking movies to see them here!');
            elements.myFavoritesPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openWatchLater() {
            const watchLaterMovies = getWatchLaterMovies();
            populateMoviesGrid(elements.watchLaterGrid, watchLaterMovies, 'No movies saved for later', 'Save movies to watch them later!');
            elements.watchLaterPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openWatchHistory() {
            const historyData = getWatchHistoryData();
            const historyMovies = Object.values(historyData)
                .sort((a, b) => b.timestamp - a.timestamp)
                .map(item => ({
                    ...item.movie,
                    watchedAt: new Date(item.timestamp).toLocaleDateString()
                }));
            
            populateMoviesGrid(elements.historyGrid, historyMovies, 'No watch history', 'Movies you watch will appear here!');
            elements.watchHistoryPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePage() {
            document.querySelectorAll('.page-overlay').forEach(page => {
                page.classList.remove('active');
            });
            document.body.style.overflow = '';
        }

        function populateMoviesGrid(container, movies, emptyTitle, emptyMessage) {
            container.innerHTML = '';
            
            if (movies.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-film"></i>
                        <h3>${emptyTitle}</h3>
                        <p>${emptyMessage}</p>
                    </div>
                `;
                return;
            }
            
            movies.forEach(movie => {
                const movieCard = createMovieCard(movie);
                container.appendChild(movieCard);
            });
        }

        // Touch support for mobile
        let startX = 0;
        let isScrolling = false;

        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (!startX) return;
            
            const currentX = e.touches[0].clientX;
            const diffX = startX - currentX;
            
            if (Math.abs(diffX) > 50 && !isScrolling) {
                const movieRows = document.querySelectorAll('.movie-row');
                movieRows.forEach(row => {
                    if (diffX > 0) {
                        row.scrollLeft += 200;
                    } else {
                        row.scrollLeft -= 200;
                    }
                });
            }
        }, { passive: true });

        document.addEventListener('touchend', () => {
            startX = 0;
            isScrolling = false;
        }, { passive: true });
    </script>
</body>
</html>